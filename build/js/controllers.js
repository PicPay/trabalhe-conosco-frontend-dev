"use strict";app.controller("mainCtrl",function(e,t,a,r){e.people=[],e.modalView={path:""},a({method:"GET",url:"http://careers.picpay.com/tests/mobdev/users"}).then(function(t){e.people=t.data},function(t){e.people=t.statusText}),e.payThisPerson=function(t){r.set(t),e.modalView.path="payment"},e.setModalView=function(t){e.modalView.path=t}}),app.controller("paymentCtrl",function(e,t,a,r,d,c){e.personToPay=a.get(),e.creditCards=d.get(),e.selectedCard=null,e.lastDigits=0,e.value="",e.mountedObjectToPay={},angular.forEach(e.creditCards,function(t,a){t.is_selected&&(e.selectedCard=t,e.lastDigits=e.selectedCard.card_number.substr(e.selectedCard.card_number.length-4))}),e.pay=function(){e.mountedObjectToPay={card_number:e.selectedCard.card_number.replace(/\s+/g,""),cvv:e.selectedCard.ccv,value:e.value,expiry_date:e.selectedCard.expiry_date,destination_user_id:e.personToPay.id},r({method:"POST",url:"http://careers.picpay.com/tests/mobdev/transaction",data:e.mountedObjectToPay}).then(function(t){c.set(t),e.modalView.path="receipt"},function(t){e.people=t.statusText})}}),app.controller("creditCardCtrl",function(e,t,a,r){e.creditCard={card_name:"",card_number:"",cvv:null,expiry_date:"",zip:"",is_selected:!1},e.saveCard=function(){t.set(e.creditCard),e.modalView.path="mycards"},e.getCard=function(){t.get()}}),app.controller("myCardsCtrl",function(e,t,a,r,d){e.creditCards=t.get(),e.targetThisCard=function(t,a){t.is_selected=!0,angular.forEach(e.creditCards,function(e,t){t!=a&&(e.is_selected=!1)})},e.deleteThisCard=function(t){e.creditCards.splice(t,1),localStorage.setItem("creditCards",JSON.stringify(e.creditCards))},e.chooseCard=function(){localStorage.setItem("creditCards",JSON.stringify(e.creditCards)),e.modalView.path="payment"}}),app.controller("receiptCtrl",function(e,t,a){e.receipt=t.get(),e.dateAndTime=new Date});